

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Optimise a striatal fast-spiking interneuron &mdash; cls-interactive 0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/style.css?v=8eff675d" />
      <link rel="stylesheet" href="../../../../_static/css/style.css" type="text/css" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=10f1778b"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
      <script src="../../../../_static/load_ga.js"></script>
      <script src="../../../../_static/collapse.js"></script>
      <script src="../../../../_static/banner.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            cls-interactive
              <img src="../../../../_static/cls-banner.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../online_usecases.html">Online Use Cases</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">cls-interactive</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Optimise a striatal fast-spiking interneuron</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/online_usecases/single_cell_modeling/basal_ganglia/opt_fs_int/opt_fs_int.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="optimise-a-striatal-fast-spiking-interneuron">
<span id="fs-single-cell-opt-guidebook"></span><h1>Optimise a striatal fast-spiking interneuron<a class="headerlink" href="#optimise-a-striatal-fast-spiking-interneuron" title="Link to this heading">ÔÉÅ</a></h1>
<p>This Use Case demonstrates how BluePyOpt can be used to optimize a striatal
fast-spiking interneuron. The notebook is self-contained and runs a few steps
of the genetic optimization. For a production run, the population size as well
as the number of iterations need to be increased as commented in the notebook.</p>
<p>The notebook starts by downloading the relevant code from the Collab storage
and setting up the simulation and graphical environment. Since we are using
Neuron, we also need to compile the channel mod files.</p>
<p>The information about the optimization to be run is stored in <cite>config/</cite>
directory:</p>
<ul class="simple">
<li><p><cite>protocols.json</cite></p></li>
<li><p><cite>features.json</cite></p></li>
<li><p><cite>mechanisms.json</cite></p></li>
<li><p><cite>parameters.json</cite> and <cite>parameters-demo.json</cite></p></li>
</ul>
<p>For each set of parameters to be tested a neuron model is instantiated by the
<cite>evaluator</cite>. A series of current injections is sent to the neuron while
recording the somatic voltage. A number of features are extracted from this
voltage trace, and compared to the same features extracted from the
corresponding experimental data.</p>
<p><cite>protocols.json</cite> lists the protocols and the associated stimuli. Each protocol
also specifies a holding current. The delay, amplitude, duration and total
duration are specified for each current injection.</p>
<p><cite>features.json</cite> lists the features. Each protocol has its own set of features.
For each feature the mean value and standard deviation (SD) are specified.
The SD is used when weighting the feature scores together to get the final
score for the model. Each feature also has a set of modifying parameters.</p>
<p><cite>mechanisms.json</cite> lists the mechanisms. Each ion channel has a corresponding
mod file which is compiled by nrnivmodl.</p>
<p><cite>parameters.json</cite> lists all the model parameters. These can either be
specified as a value, or as a range, by giving its upper and lower bounds.</p>
<p>Morphology of the neuron is located in <cite>morphology/</cite> directory:</p>
<ul class="simple">
<li><p><cite>morphology/BE37A-rep-cor-reg15.swc</cite></p></li>
</ul>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/fs-morpho.png" src="../../../../_images/fs-morpho.png" />
</div>
<p>The optimization phase is followed by the post optimization analysis within
the same notebook.  The script plots the evolution of the error scores
with successive iterations of the genetic algorithm (generations).</p>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/log.png" src="../../../../_images/log.png" />
</div>
<p>It displays the top ten individuals with the best scores and lists
the feature names.</p>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/feature_scores.png" src="../../../../_images/feature_scores.png" />
</div>
<p>It also displays the simulated protocols (blue) overlaid on the
experimental data (grey) for the best individual.</p>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/responses.png" src="../../../../_images/responses.png" />
</div>
<p>Finally, errors for each feature of the best individual are shown and
also a mean error score is calculated. Typically, the mean score is about
3 standard deviations.</p>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/best_scores.png" src="../../../../_images/best_scores.png" />
</div>
<p>It is possible to inspect any of the 10 candidate individuals as shown above
for the best individual. Corresponding instructions are given in the
notebook.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, EBRAINS Cellular Level Simulation Interactive members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>